(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{107:function(e,t){},135:function(e,t,n){},136:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(2),s=n.n(o),u=n(61),i=n.n(u),p=(n(68),n(0)),l=n.n(p),f=n(1),d=n(38),h=n(37),b=n.n(h),v=n(63),g=(n(39),n(20)),x=n(62),y="dev-1637702458471-75231541124253",w={networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:y,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"},O=n.n(x)()(10).times(Math.pow(10,13)).toFixed();function m(){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isSignedIn()){e.next=2;break}return e.abrupt("return");case 2:return"NEAR Dungeon",e.next=5,a.requestSignIn(y,"NEAR Dungeon");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.connect(Object(v.a)({deps:{keyStore:new g.keyStores.BrowserLocalStorageKeyStore}},w));case 2:return r=e.sent,a=new g.WalletConnection(r),e.next=6,new g.Contract(a.account(),y,{viewMethods:["get_status","get_player"],changeMethods:["create_player","reset_player","hire_character","tavern_stop","equip_item","unequip_item","dungeon_battle_start","dungeon_battle_end","mine_work","mine_upgrade","mine_stop","debug_set_unit"],sender:a.getAccountId()});case 6:c=e.sent,console.log(a.getAccountId());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){a.signOut(),window.location.reload(!1)}function E(e){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.mine_upgrade({event:t},O);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.mine_work({unit:t,amount:n},O);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return B.apply(this,arguments)}function B(){return(B=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.mine_stop({},O);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return q.apply(this,arguments)}function q(){return(q=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.create_player({},O,"250000000000000000000000");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get_player({player_id:a.getAccountId()});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return F.apply(this,arguments)}function F(){return(F=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.hire_character({id:t},O);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.tavern_stop({},O);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return G.apply(this,arguments)}function G(){return(G=Object(f.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.equip_item({character_id:t,item_id:n},O);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return T.apply(this,arguments)}function T(){return(T=Object(f.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.unequip_item({character_id:t,slot:n},O);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.dungeon_battle_start({event:t,character_ids:n},O);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(f.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.dungeon_battle_end({event:t},O);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return X.apply(this,arguments)}function X(){return(X=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.reset_player({},O,"100000000000000000000000");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.debug_set_unit({unit:t,amount:n},O);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(f.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.account(a.getAccountId());case 2:return t=e.sent,e.next=5,t.getAccountBalance();case 5:return n=e.sent,e.abrupt("return",(Number.parseInt(n.available)/Math.pow(10,24)).toFixed(1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(135),n(136);var te=n(4),ne=function(e){var t=e.bgcolor,n=e.completed,r={height:"100%",width:"".concat(n,"%"),backgroundColor:t,borderRadius:"inherit",textAlign:"right"};return Object(te.jsxs)("div",{style:{height:20,width:"20%",position:"absolute",left:"40%",top:"42%",backgroundColor:"#e0e0de",borderRadius:50},children:[Object(te.jsx)("div",{style:r,children:Object(te.jsx)("span",{style:{padding:5,color:"white",fontWeight:"bold"},children:"".concat(n.toFixed(0),"%")})}),Object(te.jsx)("div",{align:"center",children:"loading game"})]})},re="ContractError";var ae=function(){var e=new h.UnityContext({loaderUrl:"Build/build123.loader.js",dataUrl:"Build/build123.data",frameworkUrl:"Build/build123.framework.js",codeUrl:"Build/build123.wasm"}),t=Object(o.useState)(0),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(o.useState)("unity-canvas-zero"),u=Object(d.a)(s,2),i=u[0],p=u[1];function v(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"1"===window.localStorage.getItem("intro")&&(window.localStorage.removeItem("intro"),e.send("IntroManager","ShowIntro")),t.prev=1,t.next=4,U();case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("fetch error");case 10:if(null!==n){t.next=17;break}return window.localStorage.setItem("intro","1"),t.next=14,J();case 14:e.send("Contract","SetAccount",JSON.stringify({isLogged:!0})),t.next=18;break;case 17:e.send("Contract","SetAccount",JSON.stringify({isLogged:!0}));case 18:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){e.on("RequestLogin",Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:if(!a.isSignedIn()){t.next=7;break}return t.next=5,v();case 5:t.next=8;break;case 7:e.send("Contract","SetAccount",JSON.stringify({isLogged:!1}));case 8:case"end":return t.stop()}}),t)}))))}),[]),Object(o.useEffect)((function(){e.on("OpenLink",function(){var e=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open(t,"_blank");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),e.on("RegisterPlayer",Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.next=4,v();case 4:case"end":return e.stop()}}),e)}))),[]),Object(o.useEffect)((function(){e.on("progress",(function(e){c(100*e)}))}),[]),Object(o.useEffect)((function(){e.on("GetPlayer",Object(f.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: GetPlayer!"),r="",t.prev=2,t.next=5,U();case 5:n=t.sent,r="GetPlayer",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),r=re;case 12:console.log("onGetPlayer:"+JSON.stringify(n,null,2)),e.send("Contract","On",JSON.stringify({method:r,player:n}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))))}),[]),Object(o.useEffect)((function(){e.on("MineUpgrade",function(){var t=Object(f.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: MineUpgrade!"),a="",t.prev=2,t.next=5,E(n);case 5:r=t.sent,a="MineUpgrade",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a=re;case 12:console.log("processed: mineUpgrade"),e.send("Contract","On",JSON.stringify({method:a,player:r}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("MineWork",function(){var t=Object(f.a)(l.a.mark((function t(n,r){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: MineWork!"),c="",t.prev=2,t.next=5,C(n,r);case 5:a=t.sent,c="MineWork",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),c=re;case 12:console.log("onMineWork"),e.send("Contract","On",JSON.stringify({method:c,player:a}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("MineStop",Object(f.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: MineStop!"),r="",t.prev=2,t.next=5,A();case 5:n=t.sent,r="MineStop",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),r=re;case 12:console.log("onMineStop"),e.send("Contract","On",JSON.stringify({method:r,player:n}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))))}),[]),Object(o.useEffect)((function(){e.on("HireCharacter",function(){var t=Object(f.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: HireCharacter!"),n=Number.parseInt(n),a="",t.prev=3,t.next=6,D(n);case 6:r=t.sent,a="HireCharacter",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a=re;case 13:console.log("processed: hireCharacter"),e.send("Contract","On",JSON.stringify({method:a,player:r}));case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("TavernStop",Object(f.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: TavernStop!"),r="",t.prev=2,t.next=5,R();case 5:n=t.sent,r="TavernStop",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),r=re;case 12:console.log("processed: tavernStop"),e.send("Contract","On",JSON.stringify({method:r,player:n}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))))}),[]),Object(o.useEffect)((function(){e.on("EquipItem",function(){var t=Object(f.a)(l.a.mark((function t(n,r){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: EquipItem!"),n=Number.parseInt(n),r=Number.parseInt(r),c="",t.prev=4,t.next=7,L(n,r);case 7:a=t.sent,c="EquipItem",t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),c=re;case 14:console.log("processed: equipItem"),e.send("Contract","On",JSON.stringify({method:c,player:a}));case 16:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("UnEquipItem",function(){var t=Object(f.a)(l.a.mark((function t(n,r){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: UnEquipItem!"),n=Number.parseInt(n),c="",t.prev=3,t.next=6,W(n,r);case 6:a=t.sent,c="UnEquipItem",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),c=re;case 13:console.log("processed: unEquipItem"),e.send("Contract","On",JSON.stringify({method:c,player:a}));case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("DungeonBattleStart",function(){var t=Object(f.a)(l.a.mark((function t(n,r){var a,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(console.log("Action: DungeonBattleStart!"+n+"  "+r),r=JSON.parse(r),a=0;a<r.length;a++)r[a]=Number.parseInt(r[a]);return o="",t.prev=4,t.next=7,z(n,r);case 7:c=t.sent,o="DungeonBattleStart",t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),o=re;case 14:console.log("processed: dungeonBattleStart"),e.send("Contract","On",JSON.stringify({method:o,player:c}));case 16:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("GetBalance",Object(f.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: GetBalance"),r="",t.prev=2,t.next=5,$();case 5:n=t.sent,r="GetBalance",t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),r=re,console.log("getBalance error");case 13:console.log("processed: GetBalance"),e.send("Contract","On",JSON.stringify({method:r,player:n}));case 15:case"end":return t.stop()}}),t,null,[[2,9]])}))))}),[]),Object(o.useEffect)((function(){e.on("DungeonBattleEnd",function(){var t=Object(f.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: DungeonBattleEnd!"+n),a="",t.prev=2,t.next=5,K(n);case 5:r=t.sent,a="DungeonBattleEnd",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a=re;case 12:console.log("processed: dungeonBattleEnd"+JSON.stringify(r,null,2)),e.send("Contract","On",JSON.stringify({method:a,player:r}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("DebugSetUnit",function(){var t=Object(f.a)(l.a.mark((function t(n,r){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: DebugSetUnit!"),c="",t.prev=2,t.next=5,Y(n,r);case 5:a=t.sent,c="DebugSetUnit",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),c=re;case 12:console.log("onDebugSetUnit!"),e.send("Contract","On",JSON.stringify({method:c,player:a}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}())}),[]),Object(o.useEffect)((function(){e.on("ResetPlayer",Object(f.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Action: ResetPlayer!"),r="",t.prev=2,t.next=5,V();case 5:n=n=t.sent,r="ResetPlayer",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),r=re;case 12:console.log("onResetPlayer!"),e.send("Contract","On",JSON.stringify({method:r,player:n}));case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))))}),[]),Object(o.useEffect)((function(){e.on("loaded",Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("unity-canvas-default"));case 1:case"end":return e.stop()}}),e)}))))}),[]),document.addEventListener("keydown",(function(e){"Escape"===e.code&&p("unity-canvas-default")})),Object(te.jsxs)("div",{className:"wrapper",children:[Object(te.jsx)(b.a,{unityContext:e,className:i}),r<100?Object(te.jsx)("div",{className:"fake-unity-frame",children:Object(te.jsx)(ne,{bgcolor:"#6a1b9a",completed:r})}):null,"unity-canvas-default"===i?Object(te.jsxs)("div",{className:"btn-container",children:[Object(te.jsx)("button",{onClick:function(){var e=document.getElementById("unity-canvas-1");e.requestFullscreen?e.requestFullscreen():e.webkitrequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullscreen&&e.mozRequestFullScreen()},className:"btn",children:"full screen"}),Object(te.jsx)("button",{onClick:_,className:"btn1",children:"logout"})]}):null]})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};i.a.render(Object(te.jsx)(s.a.StrictMode,{children:Object(te.jsx)(ae,{})}),document.getElementById("root")),ce()},68:function(e,t,n){},79:function(e,t){},89:function(e,t){}},[[138,1,2]]]);
//# sourceMappingURL=main.8be1b649.chunk.js.map