{"version":3,"sources":["NearWallet.js","Build.js","ProgressBar/ProgressBar.js","App.js","reportWebVitals.js","index.js"],"names":["near","walletConnection","contract","contractName","nearConfig","networkId","nodeUrl","walletUrl","helperUrl","BOATLOAD_OF_GAS","Big","times","toFixed","requestSignIn","a","isSignedIn","connect","nearAPI","deps","keyStore","BrowserLocalStorageKeyStore","account","viewMethods","changeMethods","sender","getAccountId","console","log","logout","signOut","window","location","reload","mineUpgrade","upgradeType","mine_upgrade","resp","mineWork","unit","amount","mine_work","mineStop","mine_stop","createPlayer","create_player","getPlayer","get_player","player_id","hireCharacter","id","hire_character","tavernStop","tavern_stop","equipItem","characterId","itemId","equip_item","unEquipItem","slot","unequip_item","dungeonBattleStart","dungeonId","character_ids","dungeon_battle_start","dungeonBattleEnd","dungeon_battle_end","resetPlayer","reset_player","debugSetUnit","debug_set_unit","getBalance","getAccountBalance","balance","Number","parseInt","available","ProgressBar","props","bgcolor","completed","fillerStyles","height","width","backgroundColor","borderRadius","textAlign","style","position","left","top","padding","color","fontWeight","align","errorName","App","unityContext","UnityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","useState","loading","setLoading","canavasState","setCanvas","checkPlayer","localStorage","getItem","removeItem","send","playerView","setItem","JSON","stringify","isLogged","useEffect","on","link","open","progression","method","player","parse","i","length","document","addEventListener","e","code","className","onClick","element","getElementById","requestFullscreen","webkitrequestFullscreen","webkitRequestFullscreen","mozRequestFullscreen","mozRequestFullScreen","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d9c0dc45.chunk.js","sourcesContent":["import \"regenerator-runtime/runtime\"\nimport * as nearAPI from \"near-api-js\"\nimport Big from 'big.js'\n\n\nconst contractName = \"dev-1637702458471-75231541124253\";\n\nconst nearConfig = {\n    networkId: 'testnet',\n    nodeUrl: 'https://rpc.testnet.near.org',\n    contractName,\n    walletUrl: 'https://wallet.testnet.near.org',\n    helperUrl: 'https://helper.testnet.near.org'\n}\nlet near\nlet walletConnection\nlet contract\n\nconst BOATLOAD_OF_GAS = Big(4).times(10 ** 13).toFixed();\n\n\n// TODO allowance\nasync function refreshAllowance() {\n    alert(\"You're out of access key allowance. Need sign in again to refresh it\")\n    await logout()\n    await requestSignIn()\n}\n\n\nexport async function requestSignIn () {\n\n    if(walletConnection.isSignedIn())\n    {\n        return;\n    }\n\n    const appTitle = 'NEAR Dungeon'\n    await walletConnection.requestSignIn(contractName, appTitle)\n  \n}\n\n\n\nexport async function connect() {\n\n    near = await nearAPI.connect({\n        deps: {\n            keyStore: new nearAPI.keyStores.BrowserLocalStorageKeyStore()\n        },\n        ...nearConfig\n    })\n\n    walletConnection = new nearAPI.WalletConnection(near)\n\n    contract = await new nearAPI.Contract(walletConnection.account(), contractName, {\n        viewMethods: [\n            'get_status',\n            'get_player'\n          ],\n          changeMethods: [\n            'create_player',\n            'reset_player',\n            'hire_character',\n            'tavern_stop',\n            'equip_item',\n            'unequip_item',\n            'dungeon_battle_start',\n            'dungeon_battle_end',\n            'mine_work',\n            'mine_upgrade',\n            'mine_stop',\n            'debug_set_unit'\n          ],\n        sender: walletConnection.getAccountId()\n    })\n\n    console.log(walletConnection.getAccountId());\n}\n\n\nexport async function login() {\n       await connect();\n       await requestSignIn(); \n}\n\nexport function isLogged(){\n    return walletConnection.isSignedIn();\n}\n\n\nexport function logout() {\n    walletConnection.signOut();\n    window.location.reload(false);\n    //window.location.replace(window.location.origin + window.location.pathname)\n}\n\nexport async function mineUpgrade(upgradeType) {\n    let resp = await contract.mine_upgrade({\"event\" : upgradeType}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\n//amount str\nexport async function mineWork(unit, amount) {\n    let resp = await contract.mine_work({'unit': unit, 'amount':amount}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function mineStop() {\n    let resp = await contract.mine_stop({}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function createPlayer()\n{\n    let resp = await contract.create_player({}, BOATLOAD_OF_GAS, \"250000000000000000000000\");\n    \n    return resp;\n}\n\nexport async function getPlayer()\n{\n    let resp = await contract.get_player({player_id: walletConnection.getAccountId()});\n    return resp;\n}\n\nexport async function getStatus()\n{\n    let resp = await contract.get_status();\n    return resp;\n} \n\nexport async function hireCharacter(id) {\n\n    let resp = await contract.hire_character({'id': id}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function tavernStop() {\n\n    let resp = await contract.tavern_stop({},BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function equipItem(characterId, itemId) {\n\n    let resp = await contract.equip_item({'character_id': characterId, 'item_id': itemId}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function unEquipItem(characterId, slot) {\n\n    let resp = await contract.unequip_item({'character_id': characterId, 'slot': slot}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function dungeonBattleStart(dungeonId, character_ids) {\n\n    let resp = await contract.dungeon_battle_start({'event': dungeonId, 'character_ids': character_ids}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function dungeonBattleEnd(dungeonId) {\n\n    let resp = await contract.dungeon_battle_end({'event': dungeonId}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function resetPlayer() {\n\n    let resp = await contract.reset_player({}, BOATLOAD_OF_GAS, '100000000000000000000000');\n    return resp;\n}\n\n\nexport async function debugSetUnit(unit, amount) {\n    let resp = await contract.debug_set_unit({'unit': unit, 'amount': amount}, BOATLOAD_OF_GAS);\n    return resp;\n}\n\nexport async function getBalance()\n{\n    const account = await near.account(walletConnection.getAccountId());\n    let balance = await account.getAccountBalance();\n    return (Number.parseInt(balance.available)/10**24).toFixed(1);\n}\n","const buildName = \"build123\";\n\nexport default buildName\n","import { useState} from \"react\";\nimport \"./ProgressBar.scss\"\nimport {React} from \"react\"\n\nconst ProgressBar = (props) => {\n  const { bgcolor, completed } = props;\n\n  const containerStyles = {\n    height: 20,\n    width: '20%',\n    position: 'absolute',\n    left: '40%',\n    top: '42%',\n    backgroundColor: \"#e0e0de\",\n    borderRadius: 50,\n  }\n\n  const fillerStyles = {\n    height: '100%',\n    width: `${completed}%`,\n    backgroundColor: bgcolor,\n    borderRadius: 'inherit',\n    textAlign: 'right'\n  }\n\n  const labelStyles = {\n    padding: 5,\n    color: 'white',\n    fontWeight: 'bold'\n  }\n\n  return (\n    <div style={containerStyles}>\n      \n      <div style={fillerStyles}>\n        <span style={labelStyles}>{`${completed.toFixed(0)}%`}</span>\n      </div>\n      <div align=\"center\">loading game</div>\n    </div>\n  );\n};\n\nexport default ProgressBar;\n  ","import React, { Component } from 'react';\nimport { useState, useEffect, useCallback } from \"react\";\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { logout, isLogged, connect, getBalance, debugSetUnit, getPlayer, createPlayer, mineUpgrade, hireCharacter, tavernStop, mineWork, mineStop, equipItem, unEquipItem, dungeonBattleStart, dungeonBattleEnd, resetPlayer, requestSignIn } from \"./NearWallet\"\nimport  buildName from \"./Build.js\"\nimport \"./App.css\";\nimport ProgressBar from \"../src/ProgressBar/ProgressBar\";\n\nconst errorName = \"ContractError\";\n\n\n\nfunction App() {\n\n  const unityContext = new UnityContext({\n    loaderUrl: \"Build/\" + buildName + \".loader.js\",\n    dataUrl: \"Build/\" + buildName + \".data\",\n    frameworkUrl: \"Build/\" + buildName + \".framework.js\",\n    codeUrl: \"Build/\" + buildName + \".wasm\",\n  });\n\n  const [loading, setLoading] = useState(0);\n  const [canavasState, setCanvas] = useState(\"unity-canvas-zero\");\n\n  async function checkPlayer(){\n    if(window.localStorage.getItem(\"intro\") === \"1\")\n    {\n      window.localStorage.removeItem(\"intro\");\n      unityContext.send(\"IntroManager\", \"ShowIntro\")\n    }\n  \n    let playerView; \n    try {\n      playerView = await getPlayer();\n    }\n    catch {\n      console.log(\"fetch error\");\n    }\n\n    if (playerView === null) {\n      window.localStorage.setItem(\"intro\", \"1\");\n      await createPlayer();\n      unityContext.send(\"Contract\", \"SetAccount\", JSON.stringify({isLogged: true}));\n    }\n    else\n    {\n      unityContext.send(\"Contract\", \"SetAccount\", JSON.stringify({isLogged: true}));\n    }\n  }\n  \n  useEffect(function () {\n    unityContext.on(\"RequestLogin\", async function () {\n        \n      await connect();\n\n      if(isLogged())\n      {\n        await checkPlayer();\n      }\n      else\n      {\n        unityContext.send(\"Contract\", \"SetAccount\", JSON.stringify({isLogged: false}));\n      }\n    });\n    \n  }, []);\n\n\n  useEffect(function () {\n    unityContext.on(\"OpenLink\", async function (link) {\n        \n      window.open(link, \"_blank\");\n    });\n    \n  }, []);\n\n  unityContext.on(\"RegisterPlayer\", async function () {\n    await requestSignIn();\n    await checkPlayer();\n}, []);\n\n\n  useEffect(function () {\n    unityContext.on(\"progress\", function (progression) {\n      setLoading(progression*100);\n        \n    });\n    \n  }, []);\n\n    // react from unity\n    useEffect(function () {\n      unityContext.on(\"GetPlayer\", async function () {\n  \n        console.log(\"Action: GetPlayer!\");\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView = await getPlayer();\n          method = \"GetPlayer\";\n        }\n        catch\n        {\n          method = errorName;\n        }\n\n        console.log(\"onGetPlayer:\" + JSON.stringify(playerView, null, 2) );\n        \n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n  \n      });\n  \n    }, []);\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"MineUpgrade\", async function (upgradeType) {\n\n        console.log(\"Action: MineUpgrade!\");\n\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView =  await mineUpgrade(upgradeType);\n          method = \"MineUpgrade\";\n        }\n        catch\n        {\n          method = errorName;\n        }\n\n        console.log(\"processed: mineUpgrade\");\n        \n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n    // react from unity\n    useEffect(function () {\n      unityContext.on(\"MineWork\", async function (unit, amount) {\n  \n        console.log(\"Action: MineWork!\");\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView =  await mineWork(unit, amount);\n          method = \"MineWork\";\n        }\n        catch\n        {\n          method = errorName;\n        }\n\n\n        console.log(\"onMineWork\");\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n  \n      });\n  \n    }, []);\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"MineStop\", async function () {\n\n        console.log(\"Action: MineStop!\");\n        \n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView = await mineStop();\n          method = \"MineStop\";\n        }\n        catch\n        {\n          method = errorName;\n        }\n\n        console.log(\"onMineStop\");\n\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n  \n      });\n  \n    }, []);\n\n      // react from unity\n      useEffect(function () {\n        unityContext.on(\"HireCharacter\", async function (id) {\n    \n          console.log(\"Action: HireCharacter!\");\n\n          id = Number.parseInt(id);\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView = await hireCharacter(id);\n          method = \"HireCharacter\";\n        }\n        catch\n        {\n          method = errorName;\n        }\n  \n          console.log(\"processed: hireCharacter\");\n         \n          unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n\n        });\n    \n      }, []);\n\n       // react from unity\n     useEffect(function () {\n      unityContext.on(\"TavernStop\", async function () {\n        let playerView;\n        console.log(\"Action: TavernStop!\");\n        let method = \"\";\n\n        try\n        {\n          playerView = await tavernStop();\n          method = \"TavernStop\";\n        }\n        catch\n        {\n          method = errorName; \n        }\n  \n        console.log(\"processed: tavernStop\");\n\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"EquipItem\", async function (characterId, itemId) {\n  \n        console.log(\"Action: EquipItem!\");\n\n        characterId = Number.parseInt(characterId);\n        itemId = Number.parseInt(itemId);\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n\n          playerView= await equipItem(characterId, itemId);//2458274142, 0);//\n          method = \"EquipItem\";\n    \n        }\n        catch\n        {\n          method = errorName; \n        }\n  \n        console.log(\"processed: equipItem\");\n\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"UnEquipItem\", async function (characterId, slot) {\n  \n        console.log(\"Action: UnEquipItem!\");\n\n        characterId = Number.parseInt(characterId);\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n\n          playerView = await unEquipItem(characterId, slot);//2458274142, 'Weapon');//\n          method = \"UnEquipItem\";\n    \n        }\n        catch\n        {\n          method = errorName; \n        }\n        \n  \n        console.log(\"processed: unEquipItem\");\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n    // react from unity\n    useEffect(function () {\n      unityContext.on(\"DungeonBattleStart\", async function (dungeonId, character_ids) {\n  \n        console.log(\"Action: DungeonBattleStart!\" + dungeonId + \"  \" + character_ids);\n\n        character_ids = JSON.parse(character_ids);\n\n        for (let i = 0; i < character_ids.length; i++) {\n          character_ids[i] =  Number.parseInt(character_ids[i]);\n        }\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n\n          playerView = await dungeonBattleStart(dungeonId, character_ids);//\"GoblinsFirstTime\", [2458274142]);//\n          method = \"DungeonBattleStart\";\n    \n        }\n        catch\n        {\n          method = errorName; \n        }\n  \n        console.log(\"processed: dungeonBattleStart\");\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n\n    useEffect(function () {\n      unityContext.on(\"GetBalance\", async function () {\n  \n        console.log(\"Action: GetBalance\");\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n\n          playerView = await getBalance();//\"GoblinsFirstTime\", [2458274142]);//\n          method = \"GetBalance\";\n    \n        }\n        catch\n        {\n          method = errorName;\n          console.log(\"getBalance error\") \n        }\n  \n        console.log(\"processed: GetBalance\");\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"DungeonBattleEnd\", async function (dungeonId) {\n  \n        console.log(\"Action: DungeonBattleEnd!\" + dungeonId  );\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n\n          playerView = await dungeonBattleEnd(dungeonId);//\"GoblinsFirstTime\", [2458274142]);//\n          method = \"DungeonBattleEnd\";\n    \n        }\n        catch\n        {\n          method = errorName; \n        }\n  \n        console.log(\"processed: dungeonBattleEnd\" + JSON.stringify(playerView, null, 2));\n\n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"DebugSetUnit\", async function (unit, amount) {\n\n        console.log(\"Action: DebugSetUnit!\");\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView = await debugSetUnit(unit, amount);//\"GoblinsFirstTime\", [2458274142]);//\n          method = \"DebugSetUnit\";\n        }\n        catch\n        {\n          method = errorName; \n        }\n\n        console.log(\"onDebugSetUnit!\");\n        \n       \n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n      });\n  \n    }, []);\n\n     // react from unity\n     useEffect(function () {\n      unityContext.on(\"ResetPlayer\", async function () {\n\n        console.log(\"Action: ResetPlayer!\");\n\n        let playerView;\n        let method = \"\";\n\n        try\n        {\n          playerView = playerView = await resetPlayer();\n          method = \"ResetPlayer\";\n        }\n        catch\n        {\n          method = errorName; \n        }\n        \n        console.log(\"onResetPlayer!\");\n        \n        unityContext.send(\"Contract\", \"On\", JSON.stringify({method: method, player: playerView}));\n\n        //window.location.reload();\n  \n      });\n  \n    }, []);\n\n  useEffect(function () {\n    unityContext.on(\"loaded\", async () => setCanvas(\"unity-canvas-default\")\n    );\n  }, []);\n\n  \n  document.addEventListener('keydown', (e) => {\n    if (e.code === \"Escape\"){\n      setCanvas('unity-canvas-default');\n    }\n  });\n\n  function setFullScreen(){\n    let element = document.getElementById(\"unity-canvas-1\");\n    if(element.requestFullscreen) {\n      element.requestFullscreen();\n    } else if(element.webkitrequestFullscreen) {\n      element.webkitRequestFullscreen();\n    } else if(element.mozRequestFullscreen) {\n      element.mozRequestFullScreen();\n    }\n  \n  }\n \n\n  return (\n    <div className={\"wrapper\"}>\n      <Unity unityContext={unityContext} className={canavasState} />\n\n\n      {loading < 100? \n      <div className='fake-unity-frame'><ProgressBar bgcolor={\"#6a1b9a\"} completed={loading}/></div>\n        :\n        null\n      }\n      \n      {canavasState===\"unity-canvas-default\" ?\n         <div className='btn-container'>\n         <button onClick={setFullScreen} className={\"btn\"}>full screen</button>\n         <button onClick={logout} className={\"btn1\"}>logout</button>\n       </div>\n        \n        :\n        null\n      }\n      \n    </div>);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import App from \"./NearWalletApp\"\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}